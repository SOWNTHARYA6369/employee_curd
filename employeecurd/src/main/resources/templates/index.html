<!DOCTYPE html>
<html>
<head>
    <title>Employee List</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <center>
    <h1>Emplyee Managemnet List</h1>
    
<h2>Employee List</h2>
<a href="add.html"><button>Add Employee</button></a>
<input type="text" id="search" placeholder="Search..." onkeyup="searchTable()">

<table>
    <thead>
        <tr>
            <th>ID</th>
            <th>First Name</th>
            <th>Last Name</th>
            <th>Email</th>
            <th>Phone</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody id="employeeTable"></tbody>
</table>
</center>
<script src="script.js"></script>
<script>
async function loadEmployees() {
    const employees = await getEmployees();
    const table = document.getElementById("employeeTable");
    table.innerHTML = "";
    employees.forEach(emp => {
        table.innerHTML += `
            <tr>
                <td>${emp.employeeId}</td>
                <td>${emp.firstname}</td>
                <td>${emp.lastname}</td>
                <td>${emp.email}</td>
                <td>${emp.phone}</td>
                <td>
                    <a href="view.html?id=${emp.employeeId}">View</a>
                    <a href="edit.html?id=${emp.employeeId}">Edit</a>
                    <button onclick="deleteEmployee(${emp.employeeId})">Delete</button>
                </td>
            </tr>`;
    });
}
loadEmployees();

// simple search
function searchTable() {
    const input = document.getElementById("search").value.toLowerCase();
    const rows = document.querySelectorAll("#employeeTable tr");
    rows.forEach(row => {
        row.style.display = row.innerText.toLowerCase().includes(input) ? "" : "none";
    });
}

</script>
</body>
</html>
